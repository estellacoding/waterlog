<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="水精靈養成記 - 遊戲化的飲水追蹤應用程式，幫助您養成健康的飲水習慣">
    <title>水精靈養成記 💧</title>
    <link rel="stylesheet" href="style.css">
</head>
<body role="application">
    <!-- 跳過導航連結（無障礙功能） -->
    <a href="#main-content" class="sr-only sr-only-focusable" style="position: absolute; top: 10px; left: 10px; z-index: 10000; background: #0984e3; color: white; padding: 10px 20px; border-radius: 8px; text-decoration: none; font-weight: bold;">
        跳至主要內容
    </a>
    
    <div class="container">
        <header role="banner">
            <h1 id="app-title">💧 水精靈養成記 💧</h1>
            <div class="level-info" role="status" aria-live="polite" aria-atomic="true">
                <span class="level" aria-label="目前等級">Lv.<span id="level">1</span></span>
                <div class="exp-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" aria-label="經驗值進度">
                    <div class="exp-fill" id="expFill"></div>
                    <span class="exp-text"><span id="currentExp">0</span>/<span id="maxExp">100</span> EXP</span>
                </div>
            </div>
            <nav aria-label="主要功能選單" style="margin-top: 10px; display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
                <button onclick="showDashboard()" class="dashboard-btn" title="統計儀表板" aria-label="開啟統計儀表板">
                    <span aria-hidden="true">📊</span> 統計
                </button>
                <button onclick="showExportPanel()" class="export-btn" title="數據匯出與備份" aria-label="開啟數據匯出與備份功能">
                    <span aria-hidden="true">💾</span> 匯出
                </button>
                <button onclick="restartOnboarding()" class="help-btn" title="重新觀看導覽" aria-label="重新觀看使用說明導覽">
                    <span aria-hidden="true">❓</span> 使用說明
                </button>
                <button onclick="showSettings()" class="settings-btn" title="設定" aria-label="開啟應用程式設定">
                    <span aria-hidden="true">⚙️</span> 設定
                </button>
            </nav>
        </header>

        <main role="main" id="main-content" tabindex="-1">
            <section class="character-section" aria-labelledby="character-title">
                <h2 id="character-title" class="sr-only">水精靈角色</h2>
                <div class="character" id="character" role="img" aria-label="水精靈角色：小水滴，等級1">
                    <div class="water-sprite sprite-level-1" aria-hidden="true">🌱</div>
                    <div class="character-name" id="character-name">小水滴</div>
                </div>
            </section>

            <section class="stats-section" aria-labelledby="stats-title">
                <h2 id="stats-title" class="sr-only">飲水統計與記錄</h2>
                <div class="daily-goal progress-section">
                    <h3 id="daily-goal-title">今日目標: 2000ml</h3>
                    <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="2000" aria-labelledby="daily-goal-title" aria-live="polite">
                        <div class="progress-fill" id="dailyProgress"></div>
                        <span class="progress-text"><span id="todayAmount">0</span>ml / 2000ml</span>
                    </div>
                </div>

                <div class="quick-actions quick-buttons" role="group" aria-label="快速添加水量按鈕">
                    <button class="drink-btn" onclick="addWater(250)" aria-label="添加一杯水 250毫升">
                        <span class="icon" aria-hidden="true">🥤</span>
                        <span>一杯水<br>250ml</span>
                    </button>
                    <button class="drink-btn" onclick="addWater(500)" aria-label="添加水瓶 500毫升">
                        <span class="icon" aria-hidden="true">🍶</span>
                        <span>水瓶<br>500ml</span>
                    </button>
                    <button class="drink-btn" onclick="addWater(100)" aria-label="添加小口 100毫升">
                        <span class="icon" aria-hidden="true">☕</span>
                        <span>小口<br>100ml</span>
                    </button>
                </div>

                <div class="custom-input-section" role="group" aria-label="自訂水量與時間輸入">
                    <div class="custom-input-card">
                        <div class="custom-input-header">
                            <span class="custom-input-icon" aria-hidden="true">⚙️</span>
                            <h4>自訂記錄</h4>
                        </div>
                        
                        <div class="custom-input-body">
                            <div class="input-group">
                                <label for="customAmount" class="input-label">
                                    <span class="label-icon" aria-hidden="true">💧</span>
                                    <span>水量（毫升）</span>
                                </label>
                                <input type="number" id="customAmount" placeholder="輸入 1-1000" min="1" max="1000" aria-describedby="custom-amount-hint">
                                <span id="custom-amount-hint" class="sr-only">請輸入1到1000之間的毫升數</span>
                            </div>
                            
                            <div class="input-group">
                                <label for="useCustomTime" class="input-label checkbox-label">
                                    <input type="checkbox" id="useCustomTime" aria-describedby="custom-time-desc">
                                    <span class="label-icon" aria-hidden="true">🕐</span>
                                    <span>自訂時間</span>
                                </label>
                                <span id="custom-time-desc" class="sr-only">勾選以自訂記錄時間</span>
                                
                                <div id="customTimeContainer" class="time-input-container">
                                    <input type="time" id="customTime" aria-describedby="custom-time-hint">
                                    <p id="custom-time-hint" class="input-hint">只能選擇今天的時間</p>
                                </div>
                            </div>
                        </div>
                        
                        <button class="custom-submit-btn" onclick="addCustomWater()" aria-label="添加自訂水量記錄">
                            <span class="btn-icon" aria-hidden="true">✓</span>
                            <span>確認添加</span>
                        </button>
                    </div>
                </div>
            </section>

            <section class="achievements" aria-labelledby="achievements-title">
                <h3 id="achievements-title"><span aria-hidden="true">🏆</span> 成就系統</h3>
                <div class="achievement-list" id="achievementList" role="list" aria-live="polite">
                    <!-- 成就會動態生成 -->
                </div>
            </section>

            <section class="history" aria-labelledby="history-title">
                <h3 id="history-title"><span aria-hidden="true">📊</span> 今日記錄</h3>
                <div class="history-list" id="historyList" role="list" aria-live="polite" aria-atomic="false">
                    <!-- 記錄會動態生成 -->
                </div>
            </section>
        </main>
    </div>

    <div class="celebration" id="celebration" role="dialog" aria-modal="true" aria-labelledby="celebration-text">
        <div class="celebration-content">
            <div class="celebration-text" id="celebrationText" role="status" aria-live="assertive"></div>
            <div class="celebration-emoji" aria-hidden="true">🎉</div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>