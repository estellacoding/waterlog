# 測試文件

本專案包含兩種類型的測試，用於確保應用程式的品質和穩定性。

## 測試檔案

### 1. 單元測試 (`test-unit.html`)

測試核心功能邏輯，包括：
- **LocalStorage Manager**: 數據驗證、儲存和載入
- **數據計算邏輯**: 經驗值計算、進度百分比
- **日期時間處理**: 時間格式化、日期比較
- **設定驗證**: 每日目標範圍、快速按鈕驗證
- **統計計算**: 每日統計、目標達成判斷

### 2. 整合測試 (`test-integration.html`)

測試元件互動和系統整合，包括：
- **元件互動測試**: 添加水量、進度更新、經驗值增加、歷史記錄更新
- **數據流測試**: 數據持久化、狀態同步、快取失效
- **鍵盤導航測試**: Tab 導航、焦點指示器、ARIA 標籤
- **跨瀏覽器測試**: 瀏覽器功能檢測、LocalStorage、通知支援

## 如何執行測試

### 方法 1: 直接在瀏覽器中開啟

1. 在檔案總管中找到測試檔案
2. 雙擊開啟 `test-unit.html` 或 `test-integration.html`
3. 測試會自動執行並顯示結果

### 方法 2: 使用本地伺服器

```bash
# 使用 Python
python -m http.server 8000

# 使用 Node.js
npx serve .

# 使用 PHP
php -S localhost:8000
```

然後在瀏覽器中訪問：
- 單元測試: `http://localhost:8000/test-unit.html`
- 整合測試: `http://localhost:8000/test-integration.html`

## 測試結果解讀

### 單元測試

- **綠色 (✓)**: 測試通過
- **紅色 (✗)**: 測試失敗，會顯示錯誤訊息
- 底部顯示總體通過率

### 整合測試

- 右側面板包含多個測試按鈕
- 點擊按鈕執行對應的測試
- 測試結果會顯示在按鈕下方
- 底部日誌區域顯示詳細的測試過程

## 測試覆蓋範圍

### 核心功能
- ✓ 數據驗證和儲存
- ✓ 經驗值和等級計算
- ✓ 進度追蹤
- ✓ 歷史記錄管理

### 使用者介面
- ✓ 元件互動
- ✓ 狀態同步
- ✓ 鍵盤導航
- ✓ 無障礙功能

### 跨瀏覽器
- ✓ LocalStorage 支援
- ✓ 通知 API 支援
- ✓ Canvas 繪圖支援
- ✓ ES6 功能支援

## 已知限制

1. **單元測試**: 由於是靜態網頁應用，測試框架較為簡單，不支援複雜的模擬和隔離
2. **整合測試**: 需要手動點擊按鈕執行測試，無法完全自動化
3. **視覺測試**: 未包含視覺回歸測試，需要人工檢查 UI 外觀

## 測試最佳實踐

1. **定期執行**: 每次修改程式碼後執行測試
2. **多瀏覽器測試**: 在 Chrome、Firefox、Safari、Edge 中測試
3. **不同裝置**: 在桌面和行動裝置上測試
4. **無障礙測試**: 使用螢幕閱讀器和鍵盤導航測試

## 故障排除

### 測試無法執行
- 確保 `script.js` 和 `style.css` 在同一目錄
- 檢查瀏覽器控制台是否有錯誤訊息
- 嘗試清除瀏覽器快取

### LocalStorage 測試失敗
- 檢查瀏覽器是否允許 LocalStorage
- 確認沒有在無痕模式下執行
- 檢查儲存空間是否充足

### 通知測試失敗
- 確認瀏覽器支援通知 API
- 檢查通知權限設定
- 某些瀏覽器在本地檔案中不支援通知

## 貢獻測試

如果你想添加新的測試：

1. 在 `test-unit.html` 中添加新的測試套件
2. 在 `test-integration.html` 中添加新的測試按鈕
3. 確保測試有清楚的描述和錯誤訊息
4. 更新此文件說明新增的測試

## 參考資源

- [Web 無障礙測試指南](https://www.w3.org/WAI/test-evaluate/)
- [JavaScript 測試最佳實踐](https://github.com/goldbergyoni/javascript-testing-best-practices)
- [跨瀏覽器測試](https://developer.mozilla.org/zh-TW/docs/Learn/Tools_and_testing/Cross_browser_testing)
